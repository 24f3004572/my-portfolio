name: Cache Dependencies Workflow

on:
  workflow_dispatch:
  push:

jobs:
  test-cache:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          
      - name: Cache dependencies
        uses: actions/cache@v4
        id: cache-deps
        with:
          path: |
            ~/.cache/pip
            **/__pycache__
          key: cache-02359b9-${{ runner.os }}-${{ hashFiles('**/requirements.txt') }}
          restore-keys: |
            cache-02359b9-${{ runner.os }}-
            
      - name: prime-cache-02359b9
        run: |
          echo "Cache hit: ${{ steps.cache-deps.outputs.cache-hit }}"
          if [[ "${{ steps.cache-deps.outputs.cache-hit }}" == 'true' ]]; then
            echo "✅ Cache hit for cache-02359b9"
          else
            echo "❌ Cache miss for cache-02359b9"
          fi
          
      - name: Install dependencies
        run: |
          pip install requests pandas numpy
          echo "Dependencies installed"
